{% extends "base.html" %}

{% block content %}
<header>
	<h1>Article title</h1>

	<p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent in imperdiet lacus. Mauris in suscipit tortor, in sagittis ante. Cras hendrerit consequat velit, non sollicitudin sapien posuere eget. Aenean ullamcorper libero eget varius semper. Integer hendrerit pharetra scelerisque. Cras cursus varius mi, lacinia venenatis nibh tincidunt feugiat. Duis ac metus sit amet enim vestibulum varius vitae quis orci. Quisque mattis sit amet est convallis rhoncus. </p>
</header>

<figure class="u-float-left">
	<img src="data:image/svg+xml;utf8,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; version=&quot;1.1&quot; id=&quot;Layer_1&quot; x=&quot;0px&quot; y=&quot;0px&quot; viewBox=&quot;0 0 100 100&quot; enable-background=&quot;new 0 0 100 100&quot; xml:space=&quot;preserve&quot; height=&quot;100px&quot; width=&quot;100px&quot;><g><path d=&quot;M28.1,36.6c4.6,1.9,12.2,1.6,20.9,1.1c8.9-0.4,19-0.9,28.9,0.9c6.3,1.2,11.9,3.1,16.8,6c-1.5-12.2-7.9-23.7-18.6-31.3 c-4.9-0.2-9.9,0.3-14.8,1.4C47.8,17.9,36.2,25.6,28.1,36.6z&quot;/><path d=&quot;M70.3,9.8C57.5,3.4,42.8,3.6,30.5,9.5c-3,6-8.4,19.6-5.3,24.9c8.6-11.7,20.9-19.8,35.2-23.1C63.7,10.5,67,10,70.3,9.8z&quot;/><path d=&quot;M16.5,51.3c0.6-1.7,1.2-3.4,2-5.1c-3.8-3.4-7.5-7-11-10.8c-2.1,6.1-2.8,12.5-2.3,18.7C9.6,51.1,13.4,50.2,16.5,51.3z&quot;/><path d=&quot;M9,31.6c3.5,3.9,7.2,7.6,11.1,11.1c0.8-1.6,1.7-3.1,2.6-4.6c0.1-0.2,0.3-0.4,0.4-0.6c-2.9-3.3-3.1-9.2-0.6-17.6 c0.8-2.7,1.8-5.3,2.7-7.4c-5.2,3.4-9.8,8-13.3,13.7C10.8,27.9,9.8,29.7,9,31.6z&quot;/><path d=&quot;M15.4,54.7c-2.6-1-6.1,0.7-9.7,3.4c1.2,6.6,3.9,13,8,18.5C13,69.3,13.5,61.8,15.4,54.7z&quot;/><path d=&quot;M39.8,57.6C54.3,66.7,70,73,86.5,76.4c0.6-0.8,1.1-1.6,1.7-2.5c4.8-7.7,7-16.3,6.8-24.8c-13.8-9.3-31.3-8.4-45.8-7.7 c-9.5,0.5-17.8,0.9-23.2-1.7c-0.1,0.1-0.2,0.3-0.3,0.4c-1,1.7-2,3.4-2.9,5.1C28.2,49.7,33.8,53.9,39.8,57.6z&quot;/><path d=&quot;M26.2,88.2c3.3,2,6.7,3.6,10.2,4.7c-3.5-6.2-6.3-12.6-8.8-18.5c-3.1-7.2-5.8-13.5-9-17.2c-1.9,8-2,16.4-0.3,24.7 C20.6,84.2,23.2,86.3,26.2,88.2z&quot;/><path d=&quot;M30.9,73c2.9,6.8,6.1,14.4,10.5,21.2c15.6,3,32-2.3,42.6-14.6C67.7,76,52.2,69.6,37.9,60.7C32,57,26.5,53,21.3,48.6 c-0.6,1.5-1.2,3-1.7,4.6C24.1,57.1,27.3,64.5,30.9,73z&quot;/></g></svg>" alt="">
	<figcaption>Etiam vehicula consequat</figcaption>
</figure>

<h2>Vestibulum blandit</h2>

<p>Nunc nec tortor id <span class="u-uppercase">erat porttitor</span> bibendum. In ac libero nec ex ultricies eleifend et sit amet ante. Donec elementum turpis sed orci laoreet, vitae ultricies mauris elementum. Ut molestie mattis molestie. Integer ante nisi, pharetra et ullamcorper dignissim, tempor vitae sem. Ut <strong>ipsum enim</strong>, dictum fermentum sem quis, euismod sagittis nunc. Integer lobortis enim ac ligula viverra consectetur. Pellentesque molestie, ipsum hendrerit porttitor blandit, justo nisi efficitur nibh, sit amet elementum odio lacus eget enim. Nam convallis malesuada nunc vel posuere. Aenean interdum viverra purus sit amet luctus. Pellentesque nec turpis sit amet tortor auctor maximus. Fusce id dolor ac odio blandit interdum. <em>Fusce non</em> fringilla diam. Phasellus at eros malesuada, <a href="#">pellentesque sem</a> vestibulum, faucibus lacus.</p>

<p>Curabitur eu urna in neque tincidunt scelerisque quis eget nibh. Sed sit amet finibus velit. Maecenas semper eros quis sem pellentesque, non malesuada velit bibendum. Praesent nec rhoncus quam. Mauris vitae justo aliquam, posuere tortor ac, ultrices ipsum. Maecenas id dignissim tellus. Etiam sodales quam sed leo euismod ullamcorper. Sed nec ligula quis orci mattis posuere. Nulla pellentesque, nisi bibendum euismod elementum, velit sapien hendrerit diam, non tempor augue justo ac metus. Aenean tellus arcu, aliquam sit amet egestas vitae, finibus vitae augue. Nulla facilisi. Donec id purus non nibh pretium lobortis vitae ac ligula. Nam nec semper risus, at gravida est.</p>

<hr>

<p>Maecenas rhoncus nunc eu ante mollis dignissim. Fusce placerat purus velit, at placerat augue posuere et. Cras commodo sed lectus pulvinar rhoncus. Mauris sit amet orci sed sapien tempor pulvinar quis id libero. Praesent enim urna, consectetur quis dapibus at, mollis quis mi. Integer elementum finibus magna, eu efficitur est venenatis a. Ut sollicitudin euismod mi sit amet aliquet.</p>

<p>Morbi ut nunc eget erat scelerisque blandit. Curabitur eget massa enim. Sed sem lectus, posuere ultrices dolor nec, tincidunt suscipit libero. Sed diam mauris, blandit eget ante et, ultricies bibendum augue. Nullam in arcu et nunc porta lacinia. Aenean vitae libero turpis. Curabitur et posuere orci. Maecenas ac interdum lorem, maximus rutrum metus. Nunc erat massa, maximus sollicitudin elementum eu, ultrices ac magna. Aliquam erat volutpat. Praesent pretium, metus sit amet pharetra aliquet, libero quam sagittis odio, at feugiat urna leo et nunc. Sed nec convallis leo, nec venenatis sem. Etiam egestas pellentesque sodales. Integer iaculis ac ex eu mollis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam sollicitudin diam sed pulvinar consectetur.</p>

<p>Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Curabitur sollicitudin accumsan lectus eu vehicula. Ut mollis lacus est, eget dapibus est dapibus imperdiet. Mauris sit amet urna suscipit, accumsan nibh pretium, sollicitudin nunc. Phasellus turpis tellus, bibendum sed dapibus sit amet, rhoncus at odio. Etiam maximus dui risus, sed lacinia lacus condimentum non. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur erat sapien, mollis quis porttitor nec, bibendum ornare orci. Integer aliquet nec urna eget eleifend. Duis id arcu mi. Fusce mattis maximus nisl vel tempus. Nullam ante elit, ultrices quis tellus id, varius imperdiet mauris.</p>

<h3>Nam id</h3>

<p>Pellentesque eget porttitor odio. Vestibulum rhoncus, nisl a viverra ornare, ligula tellus semper eros, sed ullamcorper purus justo ac felis.</p>

<p>Curabitur rutrum odio varius, aliquam ante quis, rutrum velit. Quisque elementum enim sem, a mattis ex pretium nec. Sed pellentesque dignissim massa quis facilisis. Praesent consectetur gravida ante, ut fermentum risus tristique vel. Quisque metus turpis, ornare vel turpis sit amet, venenatis aliquet diam. Aenean eu pharetra leo. Vivamus vehicula elit vel mollis finibus. Maecenas vel suscipit leo, quis ullamcorper massa. Ut malesuada erat leo. Cras ut risus vehicula, posuere diam nec, posuere risus. Mauris suscipit vulputate felis, non vulputate nibh feugiat convallis. Donec at pulvinar ante, sed pharetra lacus. Integer a nisl ultricies, iaculis metus vel, egestas elit.</p>

<figure class="u-float-right">
	<img src="data:image/svg+xml;utf8,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; version=&quot;1.1&quot; id=&quot;Layer_1&quot; x=&quot;0px&quot; y=&quot;0px&quot; viewBox=&quot;0 0 100 100&quot; enable-background=&quot;new 0 0 100 100&quot; xml:space=&quot;preserve&quot; height=&quot;100px&quot; width=&quot;100px&quot;><g><path d=&quot;M28.1,36.6c4.6,1.9,12.2,1.6,20.9,1.1c8.9-0.4,19-0.9,28.9,0.9c6.3,1.2,11.9,3.1,16.8,6c-1.5-12.2-7.9-23.7-18.6-31.3 c-4.9-0.2-9.9,0.3-14.8,1.4C47.8,17.9,36.2,25.6,28.1,36.6z&quot;/><path d=&quot;M70.3,9.8C57.5,3.4,42.8,3.6,30.5,9.5c-3,6-8.4,19.6-5.3,24.9c8.6-11.7,20.9-19.8,35.2-23.1C63.7,10.5,67,10,70.3,9.8z&quot;/><path d=&quot;M16.5,51.3c0.6-1.7,1.2-3.4,2-5.1c-3.8-3.4-7.5-7-11-10.8c-2.1,6.1-2.8,12.5-2.3,18.7C9.6,51.1,13.4,50.2,16.5,51.3z&quot;/><path d=&quot;M9,31.6c3.5,3.9,7.2,7.6,11.1,11.1c0.8-1.6,1.7-3.1,2.6-4.6c0.1-0.2,0.3-0.4,0.4-0.6c-2.9-3.3-3.1-9.2-0.6-17.6 c0.8-2.7,1.8-5.3,2.7-7.4c-5.2,3.4-9.8,8-13.3,13.7C10.8,27.9,9.8,29.7,9,31.6z&quot;/><path d=&quot;M15.4,54.7c-2.6-1-6.1,0.7-9.7,3.4c1.2,6.6,3.9,13,8,18.5C13,69.3,13.5,61.8,15.4,54.7z&quot;/><path d=&quot;M39.8,57.6C54.3,66.7,70,73,86.5,76.4c0.6-0.8,1.1-1.6,1.7-2.5c4.8-7.7,7-16.3,6.8-24.8c-13.8-9.3-31.3-8.4-45.8-7.7 c-9.5,0.5-17.8,0.9-23.2-1.7c-0.1,0.1-0.2,0.3-0.3,0.4c-1,1.7-2,3.4-2.9,5.1C28.2,49.7,33.8,53.9,39.8,57.6z&quot;/><path d=&quot;M26.2,88.2c3.3,2,6.7,3.6,10.2,4.7c-3.5-6.2-6.3-12.6-8.8-18.5c-3.1-7.2-5.8-13.5-9-17.2c-1.9,8-2,16.4-0.3,24.7 C20.6,84.2,23.2,86.3,26.2,88.2z&quot;/><path d=&quot;M30.9,73c2.9,6.8,6.1,14.4,10.5,21.2c15.6,3,32-2.3,42.6-14.6C67.7,76,52.2,69.6,37.9,60.7C32,57,26.5,53,21.3,48.6 c-0.6,1.5-1.2,3-1.7,4.6C24.1,57.1,27.3,64.5,30.9,73z&quot;/></g></svg>" alt="">
	<figcaption>Etiam vehicula consequat</figcaption>
</figure>

<h4>Nullam tincidunt</h4>

<p>In at quam massa. Praesent nulla est, posuere et lectus a, interdum condimentum felis. Phasellus eu facilisis enim, eu gravida mi. Quisque eget nisl nulla. Morbi auctor, lectus in interdum sodales, felis erat accumsan ipsum, vitae suscipit felis lacus vitae ligula. Nunc eu congue augue. Nulla eget lacus augue. Mauris lobortis varius odio quis mollis.</p>

<h5>Vestibulum convallis</h5>

<p>Curabitur rutrum id quam malesuada pharetra. Mauris finibus turpis semper dictum eleifend. Suspendisse ornare sit amet tortor ullamcorper rhoncus. Proin sed odio justo. Quisque et nibh et quam vehicula suscipit a in lorem. Maecenas vulputate et metus eu condimentum. Aliquam eget vehicula dolor, maximus dictum dolor. Vivamus egestas dignissim nulla vel pretium. Ut sed massa vitae neque pulvinar consequat vitae vitae enim. Phasellus aliquet felis vehicula felis tincidunt euismod. Nulla et varius neque. Quisque venenatis, elit quis aliquet imperdiet, massa orci pulvinar velit, non vehicula ipsum arcu sit amet odio.</p>

<h6>Duis rutrum</h6>

<p>Maecenas tincidunt pellentesque nibh, a congue risus aliquam vel. Aliquam fermentum, lacus vel volutpat malesuada, mauris enim pellentesque nisl, tristique auctor nulla augue vitae mi. Fusce tincidunt eleifend lorem. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Morbi eu blandit tortor. Praesent nec auctor tellus, ut porttitor est. Donec cursus justo at viverra viverra. Aliquam congue tellus at aliquam aliquam. Ut posuere vulputate odio at tincidunt. Integer vitae maximus massa. Donec ac bibendum tellus, et blandit enim.</p>

<h2>Lists</h2>

<ul>
	<li>Nunc nibh</li>
	<li>Sollicitudin ac magna</li>
	<li>Finibus orci</li>
	<li>
		<ul>
			<li>In pretium nisl</li>
			<li>Risus pellentesque sed</li>
		</ul>
	</li>
</ul>

<ol>
	<li>Vivamus blandit</li>
	<li>Nam ut libero quis</li>
	<li>Nam vel placerat risus</li>
</ol>

<h2>Citation</h2>

<figure>
	<blockquote cite="https://www.huxley.net/bnw/four.html">
		<p>Words can be like X-rays, if you use them properly—they’ll go through anything. You read and you’re pierced.</p>
	</blockquote>
	<figcaption>—Aldous Huxley, <cite>Brave New World</cite></figcaption>
</figure>

<h2>Image</h2>

<figure>
	<img src="data:image/svg+xml;utf8,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; version=&quot;1.1&quot; id=&quot;Layer_1&quot; x=&quot;0px&quot; y=&quot;0px&quot; viewBox=&quot;0 0 100 100&quot; enable-background=&quot;new 0 0 100 100&quot; xml:space=&quot;preserve&quot; height=&quot;100px&quot; width=&quot;100px&quot;><g><path d=&quot;M28.1,36.6c4.6,1.9,12.2,1.6,20.9,1.1c8.9-0.4,19-0.9,28.9,0.9c6.3,1.2,11.9,3.1,16.8,6c-1.5-12.2-7.9-23.7-18.6-31.3 c-4.9-0.2-9.9,0.3-14.8,1.4C47.8,17.9,36.2,25.6,28.1,36.6z&quot;/><path d=&quot;M70.3,9.8C57.5,3.4,42.8,3.6,30.5,9.5c-3,6-8.4,19.6-5.3,24.9c8.6-11.7,20.9-19.8,35.2-23.1C63.7,10.5,67,10,70.3,9.8z&quot;/><path d=&quot;M16.5,51.3c0.6-1.7,1.2-3.4,2-5.1c-3.8-3.4-7.5-7-11-10.8c-2.1,6.1-2.8,12.5-2.3,18.7C9.6,51.1,13.4,50.2,16.5,51.3z&quot;/><path d=&quot;M9,31.6c3.5,3.9,7.2,7.6,11.1,11.1c0.8-1.6,1.7-3.1,2.6-4.6c0.1-0.2,0.3-0.4,0.4-0.6c-2.9-3.3-3.1-9.2-0.6-17.6 c0.8-2.7,1.8-5.3,2.7-7.4c-5.2,3.4-9.8,8-13.3,13.7C10.8,27.9,9.8,29.7,9,31.6z&quot;/><path d=&quot;M15.4,54.7c-2.6-1-6.1,0.7-9.7,3.4c1.2,6.6,3.9,13,8,18.5C13,69.3,13.5,61.8,15.4,54.7z&quot;/><path d=&quot;M39.8,57.6C54.3,66.7,70,73,86.5,76.4c0.6-0.8,1.1-1.6,1.7-2.5c4.8-7.7,7-16.3,6.8-24.8c-13.8-9.3-31.3-8.4-45.8-7.7 c-9.5,0.5-17.8,0.9-23.2-1.7c-0.1,0.1-0.2,0.3-0.3,0.4c-1,1.7-2,3.4-2.9,5.1C28.2,49.7,33.8,53.9,39.8,57.6z&quot;/><path d=&quot;M26.2,88.2c3.3,2,6.7,3.6,10.2,4.7c-3.5-6.2-6.3-12.6-8.8-18.5c-3.1-7.2-5.8-13.5-9-17.2c-1.9,8-2,16.4-0.3,24.7 C20.6,84.2,23.2,86.3,26.2,88.2z&quot;/><path d=&quot;M30.9,73c2.9,6.8,6.1,14.4,10.5,21.2c15.6,3,32-2.3,42.6-14.6C67.7,76,52.2,69.6,37.9,60.7C32,57,26.5,53,21.3,48.6 c-0.6,1.5-1.2,3-1.7,4.6C24.1,57.1,27.3,64.5,30.9,73z&quot;/></g></svg>" alt="">
	<figcaption>Etiam vehicula consequat</figcaption>
</figure>

<h2>Syntax highlighting</h2>

<pre class="code-python"><span class="k">class</span> <span class="nc">HtmlMarkupMerge</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c1"># current element path &lt;=</span>
		<strong><span class="bp">self</span><span class="o">.</span><span class="n">element_stack</span> <span class="o">=</span> <span class="p">[]</span></strong><span class="p"></span>
		<span class="bp">self</span><span class="o">.</span><span class="n">element_context_stack</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">additional_tags</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="c1"># position in code</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">text_pos</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="c1"># index of next additional tag</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">next_additional_tag_index</span> <span class="o">=</span> <span class="mi">0</span>
		<em><span class="bp">self</span><span class="o">.</span><span class="n">xf</span> <span class="o">=</span> <span class="kc">None</span></em><span class="kc"></span>

	<span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">additional_tags</span><span class="p">):</span>
		<span class="sd">"""</span>
<span class="sd">		Join code with additional tags (and solving tag crossing)</span>
<span class="sd">		"""</span>
		<span class="c1"># clear status</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">element_stack</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">element_context_stack</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">additional_tags</span> <span class="o">=</span> <span class="n">additional_tags</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">text_pos</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">next_additional_tag_index</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">xf</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">perform_join</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">"Cannot merge code blocks"</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">code</span>

	<span class="k">def</span> <span class="nf">perform_join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
		<span class="n">out</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
		<span class="k">with</span> <span class="n">etree</span><span class="o">.</span><span class="n">xmlfile</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">xf</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">xf</span> <span class="o">=</span> <span class="n">xf</span>
			<span class="n">fp</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="sa">f</span><span class="s1">'&lt;pre&gt;</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s1">&lt;/pre&gt;'</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">))</span>
			<span class="n">ignore_tags</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'html'</span><span class="p">,</span> <span class="s1">'body'</span><span class="p">}</span>
			<span class="n">context</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">iterparse</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="p">(</span><span class="s1">'start'</span><span class="p">,</span> <span class="s1">'end'</span><span class="p">),</span> <span class="n">html</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">remove_comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">remove_pis</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
			<span class="k">for</span> <span class="n">action</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>

				<span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="n">ignore_tags</span><span class="p">:</span> <span class="c1"># Don't include html / body</span>
					<span class="k">continue</span>

				<span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s1">'start'</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">push_tag</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s1">'end'</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pop_tag</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="p">)</span>

		<span class="n">html_output</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
		<span class="k">if</span> <span class="n">html_output</span> <span class="ow">and</span> <span class="n">html_output</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">:</span>
			<span class="n">html_output</span> <span class="o">=</span> <span class="n">html_output</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
		<span class="k">return</span> <span class="n">html_output</span>

	<span class="k">def</span> <span class="nf">push_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elem</span><span class="p">):</span>
		<span class="n">elem_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xf</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">))</span>
		<span class="n">elem_context</span><span class="o">.</span><span class="fm">__enter__</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">element_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">element_context_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem_context</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">pop_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elem</span><span class="p">):</span>
		<span class="c1"># find index of element to remove</span>
		<span class="n">idx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_stack</span><span class="p">)</span> <span class="o">-</span> <span class="n">operator</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_stack</span><span class="p">),</span> <span class="n">elem</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
		<span class="c1"># close crossing elements</span>
		<span class="n">close_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_stack</span><span class="p">)</span> <span class="o">-</span> <span class="n">idx</span>
		<span class="n">cross_removed_elements</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">close_count</span><span class="p">):</span>
			<span class="n">context_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_context_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
			<span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">close_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
				<span class="n">cross_removed_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
			<span class="n">context_element</span><span class="o">.</span><span class="fm">__exit__</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
		<span class="c1"># open closed elements</span>
		<span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">cross_removed_elements</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">push_tag</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">write_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
		<span class="k">while</span> <span class="n">text</span><span class="p">:</span>
			<span class="n">start_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_pos</span>
			<span class="n">end_index</span> <span class="o">=</span> <span class="n">start_index</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
			<span class="n">next_tag</span> <span class="o">=</span> <span class="kc">None</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_additional_tag_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">additional_tags</span><span class="p">):</span>
				<span class="n">next_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_tags</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">next_additional_tag_index</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">next_tag</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">next_tag</span><span class="o">.</span><span class="n">pos</span> <span class="o">&gt;</span> <span class="n">end_index</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">xf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">text_pos</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
				<span class="n">text</span> <span class="o">=</span> <span class="s1">''</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">begin</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="n">next_tag</span><span class="o">.</span><span class="n">pos</span> <span class="o">-</span> <span class="n">start_index</span><span class="p">],</span> <span class="n">text</span><span class="p">[</span><span class="n">next_tag</span><span class="o">.</span><span class="n">pos</span> <span class="o">-</span> <span class="n">start_index</span><span class="p">:]</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">xf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">begin</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">text_pos</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">begin</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">next_additional_tag_index</span> <span class="o">+=</span> <span class="mi">1</span>
				<span class="k">if</span> <span class="n">next_tag</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s1">'start'</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">push_tag</span><span class="p">(</span><span class="n">next_tag</span><span class="o">.</span><span class="n">elem</span><span class="p">)</span>
				<em><span class="k">elif</span> <span class="n">next_tag</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s1">'end'</span></em><span class="s1"></span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pop_tag</span><span class="p">(</span><span class="n">next_tag</span><span class="o">.</span><span class="n">elem</span><span class="p">)</span></pre>

<h2>Table</h2>

<p>Praesent ornare ipsum turpis. Suspendisse quis vestibulum lorem. Curabitur dictum ut augue at ultrices. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec egestas ligula vitae diam sollicitudin, lacinia sodales magna placerat. Pellentesque a finibus urna. Mauris sed diam ligula. Vivamus sed euismod quam. Morbi blandit, ipsum nec lacinia mollis, lorem lacus facilisis risus, ut hendrerit lacus ex vitae lectus. Quisque iaculis volutpat lectus quis feugiat. Nullam egestas lectus in blandit rutrum. Fusce mollis sapien ut consectetur rutrum. Duis imperdiet in enim non sollicitudin. Vestibulum scelerisque convallis volutpat.</p>

<div class="table">
	<table class="u-nowrap">
		<thead>
			<tr>
				<th rowspan="2">Benchmark</th>
				<th colspan="2">Intel AX 200</th>
				<th colspan="2">Intel 8265</th>
			</tr>
			<tr>
				<th>Speed</th>
				<th>Strength</th>
				<th>Speed</th>
				<th>Strength</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<th>2,4 GHz Download</th>
				<td>79,71 Mbit/s</td>
				<td>-53,85 dBm</td>
				<td>74,81 Mbit/s</td>
				<td>-55,57 dBm</td>
			</tr>
			<tr>
				<th><small>Standard deviation</small><br> </th>
				<td><small>3,089</small><br></td>
				<td><small>0,300</small><br></td>
				<td><small>10,04</small><br></td>
				<td><small>1,497</small><br></td>
			</tr>
			<tr>
				<th>2,4 GHz Upload</th>
				<td>98,59 Mbit/s</td>
				<td>-54,26 dBm</td>
				<td>93,79 Mbit/s</td>
				<td>-56,37 dBm</td>
			</tr>
			<tr>
				<th><small>Standard deviation</small><br> </th>
				<td><small>7,530</small><br></td>
				<td><small>0,240</small><br></td>
				<td><small>10,14</small><br></td>
				<td><small>0,429</small><br></td>
			</tr>
			<tr>
				<th>5 GHz Download</th>
				<td>162,0 Mbit/s</td>
				<td>-73,58 dBm</td>
				<td>127,47 Mbit/s</td>
				<td>-76,83 dBm</td>
			</tr>
			<tr>
				<th><small>Standard deviation</small><br> </th>
				<td><small>12,79</small><br></td>
				<td><small>0,622</small><br></td>
				<td><small>25,75</small><br></td>
				<td><small>0,972</small><br></td>
			</tr>
			<tr>
				<th>5 GHz Upload</th>
				<td>140,2 Mbit/s</td>
				<td>-74,46 dBm</td>
				<td>59,08 Mbit/s</td>
				<td>-77.39 dBm</td>
			</tr>
			<tr>
				<th><small>Standard deviation</small><br> </th>
				<td><small>13,69</small><br></td>
				<td><small>0,663</small><br></td>
				<td><small>23,36</small><br></td>
				<td><small>0,821</small><br></td>
			</tr>
		</tbody>
	</table>
</div>

<p>Praesent vulputate in turpis condimentum sodales. Integer in euismod purus. Pellentesque viverra dignissim urna nec scelerisque. Sed pellentesque laoreet lorem quis pellentesque. Nunc posuere elementum imperdiet. Nullam lobortis maximus ante sed placerat. Nullam mattis tortor vel est egestas, at malesuada tortor finibus. Sed aliquet, sapien ac dapibus finibus, quam eros molestie magna, eget facilisis ex lorem eget diam. Fusce tempus magna in enim scelerisque, in condimentum ante condimentum. Nullam semper vulputate mauris, ac faucibus nibh accumsan vel. Morbi interdum, erat vitae volutpat fringilla, turpis magna tristique nisi, sollicitudin vestibulum risus lorem vitae lectus. Maecenas a neque et nulla efficitur consectetur. Mauris rutrum laoreet nulla ac ullamcorper. Nunc consectetur dolor non tortor convallis, vitae tincidunt ipsum posuere. Mauris placerat leo ut sagittis dapibus.</p>

<div class="table table--wide">
	<table class="u-nowrap">
		<thead>
			<tr>
				<th colspan="4" class="u-align-center">Wide table</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Speed</td>
				<td>Strength</td>
				<td>Speed</td>
				<td>Strength</td>
			</tr>
			<tr>
				<td>Speed</td>
				<td>Strength</td>
				<td>Speed</td>
				<td>Strength</td>
			</tr>
			<tr>
				<td>Speed</td>
				<td>Strength</td>
				<td>Speed</td>
				<td>Strength</td>
			</tr>
			<tr>
				<td>Speed</td>
				<td>Strength</td>
				<td>Speed</td>
				<td>Strength</td>
			</tr>
			<tr>
				<td>Speed</td>
				<td>Strength</td>
				<td>Speed</td>
				<td>Strength</td>
			</tr>
		</tbody>
	</table>
</div>

{% endblock %}
